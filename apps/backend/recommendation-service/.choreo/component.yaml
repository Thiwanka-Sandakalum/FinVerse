# Configuration file schema version
schemaVersion: 1.2

# Incoming connection details for the component
endpoints:
  - name: recommendation-service
    displayName: FinVerse Recommendation Service
    service:
      basePath: /api/v1
      port: 4003
    type: REST
    networkVisibilities:
      - Public
    schemaFilePath: docs/openapi.yaml

# Dependencies and connections
dependencies:
  connectionReferences:
    - name: mongodb-connection
      resourceRef: service:/FinVerse/MongoDB/v1
    - name: rabbitmq-connection
      resourceRef: service:/FinVerse/RabbitMQ/v1
    - name: banking-service-connection
      resourceRef: service:/FinVerse/BankingService/v1

# Runtime configurations
configurations:
  env:
    # MongoDB Configuration
    - name: MONGO_URI
      valueFrom:
        connectionRef:
          name: mongodb-connection
          key: URI
    - name: MONGO_DB
      valueFrom:
        configForm:
          displayName: MongoDB Database Name
          type: string
          required: true

    # RabbitMQ Configuration
    - name: RABBITMQ_URL
      valueFrom:
        connectionRef:
          name: rabbitmq-connection
          key: URL

    # Banking Service Configuration
    - name: BANKING_SERVICE_URL
      valueFrom:
        connectionRef:
          name: banking-service-connection
          key: ServiceURL

    # Model Configuration
    - name: MODEL_REFRESH_INTERVAL
      valueFrom:
        configForm:
          displayName: Model Refresh Interval (seconds)
          type: number
          required: false

    # Debug Mode
    - name: DEBUG
      valueFrom:
        configForm:
          displayName: Debug Mode
          type: boolean
          required: false

  # File configurations
  file:
    - name: logging.yaml
      mountPath: /app/config
      type: yaml
      values:
        - name: log_level
          valueFrom:
            configForm:
              displayName: Log Level
              type: string
              required: false
